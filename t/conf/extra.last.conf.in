# this file will be Include-d by @ServerRoot@/httpd.conf

# @ServerRoot@ = t directory

LoadModule apreq_module /usr/lib/apache2/modules/mod_apreq2.so

# where Apache2::Controller and the test application libs can be found
PerlSwitches -I@ServerRoot@/lib

PerlLoadModule Apache2::Request
PerlLoadModule Apache2::RequestRec
PerlLoadModule Apache2::Upload
PerlLoadModule Apache2::RequestUtil
PerlLoadModule Apache2::Cookie
PerlLoadModule Apache2::RequestIO
PerlLoadModule Apache2::Module

PerlLoadModule Apache2::Controller::Directives
A2CRenderTemplatePath @ServerRoot@/templates/primary

PerlLoadModule TestApp::Simple::Dispatch
PerlLoadModule TestApp::Render::Dispatch

# preload the module
<Location '/simple'>
    SetHandler modperl
    PerlInitHandler TestApp::Simple::Dispatch
</Location>

<Location '/render'>
    SetHandler modperl
    PerlInitHandler TestApp::Render::Dispatch
</Location>

<Location '/render/multipath'>
    A2CRenderTemplatePath @ServerRoot@/templates/primary @ServerRoot@/templates/secondary
</Location>

PerlLoadModule TestApp::Session::Session
<Location '/session'>
    SetHandler modperl
    PerlInitHandler TestApp::Session::Dispatch

    # in theory my testapp get_options should detect system-appropriate tempdirs
    A2CSessionCookieOptions     name    testapp_sessid
    PerlHeaderParserHandler     TestApp::Session::Session
</Location>

